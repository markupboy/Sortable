/*! Sortable 0.2.1 - MIT | git://github.com/markupboy/Sortable.git */
(function(){!function(a){"use strict";return"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():window.Sortable=a()}(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;return d=f=l=i=h=g=b=n=p=void 0,e="Sortable"+(new Date).getTime(),q=window,c=q.document,k=q.parseInt,A=!1,t=function(a,b){var d;return d=c.createEvent("Event"),d.initEvent(a,!0,!0),d.item=b,d},j=function(){},m=[].slice,o=[],a=function(){function a(a,b){var c;this.el=a,this.options=b=b||{},b.group=b.group||Math.random(),b.handle=b.handle||null,b.draggable=b.draggable||a.children[0]&&a.children[0].nodeName||"li",b.ghostClass=b.ghostClass||"sortable-ghost",b.focusClass=b.focusClass||"sortable-focus",b.onAdd=r(this,b.onAdd||j),b.onUpdate=r(this,b.onUpdate||j),b.onRemove=r(this,b.onRemove||j),a[e]=b.group;for(c in this)"_"===c.charAt(0)&&(this[c]=r(this,this[c]));z(a,"add",b.onAdd),z(a,"update",b.onUpdate),z(a,"remove",b.onRemove),z(a,"mousedown",this._onTapStart),z(a,"touchstart",this._onTapStart),z(a,"selectstart",this._onTapStart),z(a,"dragover",this._onDragOver),z(a,"dragenter",this._onDragOver),o.push(this._onDragOver)}return a.prototype._applyEffects=function(){return B(d,this.options.ghostClass,!0)},a.prototype._onTapStart=function(a){var b,e,f,g,h;if(h=a.touches&&a.touches[0],g=(h||a).target,f=this.options,b=this.el,f.handle&&(g=s(g,f.handle,b)),g=s(g,f.draggable,b),g&&"selectstart"===a.type&&"A"!==g.tagName&&"IMG"!==g.tagName&&g.dragDrop(),B(g,this.options.focusClass,!0),g&&!d&&g.parentNode===b){n=a,g.draggable=!0,w(g,"a",v),w(g,"img",v),h&&(n={target:g,clientX:h.clientX,clientY:h.clientY},this._onDragStart(n,!0),a.preventDefault()),z(this.el,"touchend",this._onTapEnd),z(this.el,"mouseup",this._onTapEnd),z(this.el,"dragstart",this._onDragStart),z(this.el,"dragend",this._onDrop),z(c,"dragover",x);try{return c.selection?c.selection.empty():window.getSelection().removeAllRanges()}catch(i){if(e=i,console&&"function"==typeof console.log)return console.log(e)}}},a.prototype._emulateDragOver=function(){var a,b,d,g;if(p){for(u(f,"display","none"),g=c.elementFromPoint(p.clientX,p.clientY),d=g,a=this.options.group,b=o.length;d;){if(d[e]===a){for(;b--;)o[b]({clientX:p.clientX,clientY:p.clientY,target:g,rootEl:d});break}g=d,d=d.parentNode}return u(f,"display","")}},a.prototype._onTouchMove=function(a){var b,c,d;return n?(d=a.touches[0],b=d.clientX-n.clientX,c=d.clientY-n.clientY,p=d,u(f,"webkitTransform","translate3d("+b+"px,"+c+"px,0)")):void 0},a.prototype._onDragStart=function(a,e){var g,h,j,m,n;return n=a.target,h=a.dataTransfer,l=this.el,d=n,i=n.nextSibling,b=this.options.group,e?(m=n.getBoundingClientRect(),g=u(n),f=n.cloneNode(!0),u(f,"top",n.offsetTop-k(g.marginTop,10)),u(f,"left",n.offsetLeft-k(g.marginLeft,10)),u(f,"width",m.width),u(f,"height",m.height),u(f,"opacity","0.8"),u(f,"position","fixed"),u(f,"zIndex","100000"),l.appendChild(f),j=f.getBoundingClientRect(),u(f,"width",2*m.width-j.width),u(f,"height",2*m.height-j.height),z(c,"touchmove",this._onTouchMove),z(c,"touchend",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)):(h.effectAllowed="move",h.setData("Text",n.textContent),z(c,"drop",this._onDrop)),setTimeout(this._applyEffects)},a.prototype._onDragOver=function(a){var c,i,j,k,l,m,n,o,p,q,r;if(!A&&b===this.options.group&&(void 0===a.rootEl||a.rootEl===this.el)){if(i=this.el,q=s(a.target,this.options.draggable,i),0===i.children.length||i.children[0]===f)return i.appendChild(d);if(q&&q!==d&&void 0!==q.parentNode[e])return h!==q&&(h=q,g=u(q)),o=q.getBoundingClientRect(),r=o.right-o.left,k=o.bottom-o.top,j=/left|right|inline/.test(g.cssFloat+g.display),p=(j?(a.clientX-o.left)/r:(a.clientY-o.top)/k)>.5,m=q.offsetWidth>d.offsetWidth,l=q.offsetHeight>d.offsetHeight,n=q.nextSibling,c=null,A=!0,setTimeout(C,30),c=j?q.previousElementSibling===d&&!m||p>.5&&m:q.nextElementSibling!==d&&!l||p>.5&&l,c&&!n?i.appendChild(d):q.parentNode.insertBefore(d,c?n:q)}},a.prototype._onDrop=function(a){return clearInterval(this._loopId),y(c,"drop",this._onDrop),y(c,"dragover",x),y(this.el,"dragend",this._onDrop),y(this.el,"dragstart",this._onDragStart),y(c,"touchmove",this._onTouchMove),y(c,"touchend",this._onDrop),a?(a.preventDefault(),a.stopPropagation(),f&&f.parentNode.removeChild(f),d&&(B(d,this.options.focusClass,!1),B(d,this.options.ghostClass,!1),l.contains(d)?d.nextSibling!==i&&d.dispatchEvent(t("update",d)):(l.dispatchEvent(t("remove",d)),d.dispatchEvent(t("add",d)))),l=d=f=i=n=p=h=g=b=null):void 0},a.prototype._onTapEnd=function(a){var b;return b=s(a.target,this.options.draggable,this.el),B(b,this.options.focusClass,!1)},a.prototype.destroy=function(){var a,b;return a=this.el,b=this.options,y(a,"add",b.onAdd),y(a,"update",b.onUpdate),y(a,"remove",b.onRemove),y(a,"mousedown",this._onTapStart),y(a,"touchstart",this._onTapStart),y(a,"dragover",this._onDragOver),y(a,"dragenter",this._onDragOver),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){return a.removeAttribute("draggable")}),o.splice(o.indexOf(this._onDragOver),1),this._onDrop(),this.el=null},a}(),r=function(a,b){var c;return c=m.call(arguments,2),b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(m.call(arguments)))}},s=function(a,b,d){var e,f,g;if(a){if(d=d||c,b=b.split("."),f=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g"),(g=function(){return!(""!==f&&a.nodeName!==f||b.length&&((" "+a.className+" ").match(e)||[]).length!==b.length)})())return a;for(a=a.parentNode;a!==d&&a;){if(g())return a;a=a.parentNode}}return null},x=function(a){return a.dataTransfer.dropEffect="move",a.preventDefault()},z=function(a,b,c){return a.addEventListener(b,c,!1)},y=function(a,b,c){return a.removeEventListener(b,c,!1)},B=function(a,b,c){var d;return a?a.classList?a.classList[c?"add":"remove"](b):(d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ",""),a.className=d+(c?" "+b:"")):void 0},u=function(a,b,d){return a&&a.style?void 0===d?(c.defaultView&&c.defaultView.getComputedStyle?d=c.defaultView.getComputedStyle(a,""):a.currentStyle&&(d=a.currentStyle),void 0===b?d:d[b]):a.style[b]=d+("string"==typeof d?"":"px"):void 0},w=function(a,b,c){var d,e,f,g,h;if(a){if(f=a.getElementsByTagName(b),c)for(d=g=0,h=f.length;h>g;d=++g)e=f[d],c(e,d);return f}return[]},v=function(a){return a.draggable=!1},C=function(){return A=!1},a.utils={on:z,off:y,css:u,find:w,bind:r,closest:s,toggleClass:B},a.version="0.2.1",a})}).call(this);