/*! Sortable 0.2.1 - MIT | git://github.com/markupboy/Sortable.git */
(function(){!function(a){"use strict";return"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a():window.Sortable=a()}(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;return d=f=l=i=h=g=b=n=q=o=void 0,e="Sortable"+(new Date).getTime(),r=window,c=r.document,k=r.parseInt,B=!1,u=function(a,b){var d;return d=c.createEvent("Event"),d.initEvent(a,!0,!0),d.item=b,d},j=function(){},m=[].slice,p=[],a=function(){function a(a,b){var c;if(null!=a){this.el=a,this.options=b=b||{},this.moved=!1,b.group=b.group||Math.random(),b.handle=b.handle||null,b.draggable=b.draggable||a.children[0]&&a.children[0].nodeName||"li",b.ghostClass=b.ghostClass||"sortable-ghost",b.focusClass=b.focusClass||"sortable-focus",b.ghostTopOffset=b.ghostTopOffset||0,b.ghostLeftOffset=b.ghostLeftOffset||0,b.ghostOpacity=b.ghostOpacity||"1",b.onAdd=s(this,b.onAdd||j),b.onUpdate=s(this,b.onUpdate||j),b.onRemove=s(this,b.onRemove||j),a[e]=b.group;for(c in this)"_"===c.charAt(0)&&(this[c]=s(this,this[c]));A(a,"add",b.onAdd),A(a,"update",b.onUpdate),A(a,"remove",b.onRemove),A(a,"mousedown",this._onTapStart),A(a,"touchstart",this._onTapStart),A(a,"selectstart",this._onTapStart),A(a,"dragover",this._onDragOver),A(a,"dragenter",this._onDragOver),p.push(this._onDragOver)}}return a.prototype._applyEffects=function(){return C(d,this.options.ghostClass,!0)},a.prototype._onTapStart=function(a){var b,e,f,g;if(o=a.touches&&a.touches[0],g=(o||a).target,f=this.options,b=this.el,f.handle&&(g=t(g,f.handle,b)),g=t(g,f.draggable,b),g&&"selectstart"===a.type&&"A"!==g.tagName&&"IMG"!==g.tagName&&g.dragDrop(),C(g,this.options.focusClass,!0),g&&!d&&g.parentNode===b){n=a,g.draggable=!0,x(g,"a",w),x(g,"img",w),o&&(n={target:g,clientX:o.clientX,clientY:o.clientY},this._onDragStart(n,!0),a.preventDefault()),A(this.el,"touchend",this._onTapEnd),A(this.el,"mouseup",this._onTapEnd),A(this.el,"dragstart",this._onDragStart),A(this.el,"dragend",this._onDrop),A(c,"dragover",y);try{return c.selection?c.selection.empty():window.getSelection().removeAllRanges()}catch(h){if(e=h,console&&"function"==typeof console.log)return console.log(e)}}},a.prototype._emulateDragOver=function(){var a,b,d,g;if(q){for(v(f,"display","none"),g=c.elementFromPoint(q.clientX,q.clientY),d=g,a=this.options.group,b=p.length;d;){if(d[e]===a){for(;b--;)p[b]({clientX:q.clientX,clientY:q.clientY,target:g,rootEl:d});break}g=d,d=d.parentNode}return v(f,"display","")}},a.prototype._onTouchMove=function(a){var b,c;return this.moved=!0,n?(o=a.touches[0],b=o.clientX-n.clientX,c=o.clientY-n.clientY,q=o,v(f,"webkitTransform","translate3d("+b+"px,"+c+"px,0)")):void 0},a.prototype._onDragStart=function(a,e){var g,h,j,m,n;return n=a.target,h=a.dataTransfer,l=this.el,d=n,i=n.nextSibling,b=this.options.group,e?(m=n.getBoundingClientRect(),g=v(n),f=n.cloneNode(!0),v(f,"top",m.top+this.options.ghostTopOffset-k(g.marginTop,10)),v(f,"left",m.left+this.options.ghostLeftOffset-k(g.marginTop,10)),v(f,"width",m.width),v(f,"height",m.height),v(f,"opacity",this.options.ghostOpacity),v(f,"position","fixed"),v(f,"zIndex","100000"),l.appendChild(f),j=f.getBoundingClientRect(),v(f,"width",2*m.width-j.width),v(f,"height",2*m.height-j.height),A(c,"touchmove",this._onTouchMove),A(c,"touchend",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)):(h.effectAllowed="move",h.setData("Text",n.textContent),A(c,"drop",this._onDrop)),setTimeout(this._applyEffects)},a.prototype._onDragOver=function(a){var c,i,j,k,l,m,n,o,p,q,r;if(!B&&b===this.options.group&&(void 0===a.rootEl||a.rootEl===this.el)){if(i=this.el,q=t(a.target,this.options.draggable,i),0===i.children.length||i.children[0]===f)return i.appendChild(d);if(q&&q!==d&&void 0!==q.parentNode[e])return h!==q&&(h=q,g=v(q)),o=q.getBoundingClientRect(),r=o.right-o.left,k=o.bottom-o.top,j=/left|right|inline/.test(g.cssFloat+g.display),p=(j?(a.clientX-o.left)/r:(a.clientY-o.top)/k)>.5,m=q.offsetWidth>d.offsetWidth,l=q.offsetHeight>d.offsetHeight,n=q.nextSibling,c=null,B=!0,setTimeout(D,30),c=j?q.previousElementSibling===d&&!m||p>.5&&m:q.nextElementSibling!==d&&!l||p>.5&&l,c&&!n?i.appendChild(d):q.parentNode.insertBefore(d,c?n:q)}},a.prototype._onDrop=function(a){return clearInterval(this._loopId),z(c,"drop",this._onDrop),z(c,"dragover",y),z(this.el,"dragend",this._onDrop),z(this.el,"dragstart",this._onDragStart),z(c,"touchmove",this._onTouchMove),z(c,"touchend",this._onDrop),a?(a.preventDefault(),a.stopPropagation(),f&&f.parentNode.removeChild(f),d&&(C(d,this.options.focusClass,!1),C(d,this.options.ghostClass,!1),l.contains(d)?d.nextSibling!==i&&d.dispatchEvent(u("update",d)):(l.dispatchEvent(u("remove",d)),d.dispatchEvent(u("add",d)))),l=d=f=i=n=q=h=g=b=null):void 0},a.prototype._onTapEnd=function(a){var b;return b=t(a.target,this.options.draggable,this.el),C(b,this.options.focusClass,!1),b&&o&&!this.moved&&b.dispatchEvent(u("click",b)),this.moved=!1},a.prototype.destroy=function(){var a,b;return a=this.el,b=this.options,z(a,"add",b.onAdd),z(a,"update",b.onUpdate),z(a,"remove",b.onRemove),z(a,"mousedown",this._onTapStart),z(a,"touchstart",this._onTapStart),z(a,"dragover",this._onDragOver),z(a,"dragenter",this._onDragOver),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){return a.removeAttribute("draggable")}),p.splice(p.indexOf(this._onDragOver),1),this._onDrop(),this.el=null},a}(),s=function(a,b){var c;return c=m.call(arguments,2),b.bind?b.bind.apply(b,[a].concat(c)):function(){return b.apply(a,c.concat(m.call(arguments)))}},t=function(a,b,d){var e,f,g;if(a){if(d=d||c,b=b.split("."),f=b.shift().toUpperCase(),e=new RegExp("\\s("+b.join("|")+")\\s","g"),(g=function(){return!(""!==f&&a.nodeName!==f||b.length&&((" "+a.className+" ").match(e)||[]).length!==b.length)})())return a;for(a=a.parentNode;a!==d&&a;){if(g())return a;a=a.parentNode}}return null},y=function(a){return a.dataTransfer.dropEffect="move",a.preventDefault()},A=function(a,b,c){return a.addEventListener(b,c,!1)},z=function(a,b,c){return a.removeEventListener(b,c,!1)},C=function(a,b,c){var d;return a?a.classList?a.classList[c?"add":"remove"](b):(d=(" "+a.className+" ").replace(/\s+/g," ").replace(" "+b+" ",""),a.className=d+(c?" "+b:"")):void 0},v=function(a,b,d){return a&&a.style?void 0===d?(c.defaultView&&c.defaultView.getComputedStyle?d=c.defaultView.getComputedStyle(a,""):a.currentStyle&&(d=a.currentStyle),void 0===b?d:d[b]):a.style[b]=d+("string"==typeof d?"":"px"):void 0},x=function(a,b,c){var d,e,f,g,h;if(a){if(f=a.getElementsByTagName(b),c)for(d=g=0,h=f.length;h>g;d=++g)e=f[d],c(e,d);return f}return[]},w=function(a){return a.draggable=!1},D=function(){return B=!1},a.utils={on:A,off:z,css:v,find:x,bind:s,closest:t,toggleClass:C},a.version="0.2.1",a})}).call(this);